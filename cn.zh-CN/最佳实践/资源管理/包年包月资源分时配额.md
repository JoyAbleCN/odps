---
keyword: 分时配额
---

# 包年包月资源分时配额

本文为您介绍如何对包年包月计算资源按照时间段设置资源配额，协助您更快上手使用分时配额功能，提高计算资源使用率。

## 背景信息

在数据开发过程中，不同项目（开发、生产或分析）使用计算资源的时段不同。例如，数据仓库团队有生产、开发和业务分析项目，夜间是生产项目的计算高峰期；白天是开发和业务分析项目的计算高峰期。即不同项目在不同的时段对计算资源的需求量不同，且日常峰谷时间段比较固定。

[MaxCompute管家](/cn.zh-CN/管理/资源和作业管理/MaxCompute管家.md)之前提供的自定义配额组，只能对计算资源进行切分，但无法按照时段进行切分。自2020年7月23日开始，各个区域的MaxCompute管家陆续升级至新版本，新版本支持分时配额功能，可以对预留计算资源（预留CU）按时段切分，满足不同时段的差异化资源需求，并对计算资源进行隔离（生产、开发或分析），避免项目之间相互干扰，同时更大化提高计算资源使用率。

## 使用限制

-   仅项目空间Owner可以设置分时配额功能。
-   仅包年包月预留计算资源支持设置分时配额，非预留计算资源不支持设置分时配额。

## 使用说明

分时配额功能使用注意点如下。

|操作类型|注意事项|
|----|----|
|开启分时配额|-   开启分时配额功能后，当前区域下的所有配额组都开启分时配额功能，但默认配额组不支持设置分时配额。
-   开启分时配额功能后，默认只有一个分时时间段（00:00:00~23:59:59）。最多支持设置3个分时时间段。所有配额组都支持设置同一个分时时间段，即所有配额组的分时时间段相同。
-   只支持设置整点分时时间段，例如00:00:00~07:00:00，最后一个分时时间段截止时刻必须为23:59:59。
-   如果某个配额组不需要设置分时时间段，设置每个分时时间段的预留最小或最大CU数量一样即可。
-   同一个分时时间段，所有配额组的预留CU最小值总和等于购买的CU数量。 |
|关闭分时配额|如果设置的分时时间段不合理或需要调整，您可以单击**设置分时**。在**设置分时**对话框，单击**关闭分时**。配额组的预留CU量为关闭前的时间段所设置的CU量。详情请参见[设置配额组 \> 设置分时](/cn.zh-CN/管理/资源和作业管理/MaxCompute管家.md)。|
|修改分时配额|不支持直接在已设置的分时上修改分时时间段，您需要先**关闭分时**，再**开启分时**，配置新分时时间段，并修改各个自定义配额组中不同时间段的预留CU量。|

## 使用案例

**场景**

例如，数据仓库团队在华北2（北京）区域购买了包年包月预留计算资源100 CU，该团队有生产、开发和分析项目。

**分析各项目资源使用高峰**

-   生产项目：计算高峰时间段为00:00:00~08:00:00，计算资源使用量较高，其余时间会有小部分小时任务且时间要求不高。
-   开发项目：计算高峰时间段为09:00:00~23:00:00，计算资源使用量较高。
-   分析项目：计算高峰时间段为09:00:00~23:00:00，计算比较分散，但也有些固定周期调度任务需要保障。

上述时间段分布比较固定，因此可以将配额组切分为2个时段00:00:00~08:00:00和08:00:00~23:59:59。生产、开发、分析项目对计算资源的需求量也各有差异，因此可以自定义2个配额组，外加默认配额组共3个配额组对计算资源进行分配。

**设计配额组**

-   分时时间段1：00:00:00~08:00:00
-   分时时间段2：08:00:00~23:59:59

|配额组名称|分时时间段1预留CU Min值|分时时间段1预留CU Max值|分时时间段2预留CU Min值|分时时间段2预留CU Max值|备注|
|-----|---------------|---------------|---------------|---------------|--|
|默认配额组|80|100|20|100|生产项目配额。|
|开发配额组|10|10|30|50|分时时间段1预留一些计算资源用于临时开发测试场景。若计算资源空闲，当默认配额组下的资源需求量超过80 CU时也可以使用。|
|分析配额组|10|10|50|100|分时时间段1预留一些计算资源用于临时获取数据场景。若计算资源空闲，当默认配额组下的资源需求量超过80 CU时也可以使用。|

**说明：** 默认配额组不支持自定义编辑，预留CU值为扣除自定义配额组设置的CU数量后剩余的CU量。

**设置步骤**

1.  进入MaxCompute管家页面。
    1.  登录[MaxCompute控制台](https://workbench.data.aliyun.com/#/MCEngines)，在左上角选择区域。

        ![控制台](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7186911061/p170727.png)

    2.  单击**管家**页签，即可进入MaxCompute管家页面。
2.  在左侧导航栏，单击**配额**。在**配额**页面，单击右上角**设置分时**。
3.  在**设置分时**对话框，按照需要增加时间段，单击**开启分时**。
4.  在**配额**页面，单击右上角**新建配额组**新建开发和分析配额组。单击默认配额组右侧的**修改**修改配额组，对每个配额组预留CU不同时段的Min和Max值进行设置。例如，分析项目的配额组设置如下。

    ![分析配额组](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4483683061/p177101.png)

    **说明：** **非预留CU最大配额**即包年包月里的非预留计算资源，详情请参见[包年包月非预留计算资源](/cn.zh-CN/规格类型/包年包月非预留计算资源.md)。

5.  在左侧导航栏，单击**项目**。在**项目**页面的**包年包月项目**页签，单击生产、开发或分析项目右侧的**修改**。
6.  在**修改配额组信息**面板，从**配额组**下拉列表，选择相应的配额组，单击**执行**，即可完成配置。

